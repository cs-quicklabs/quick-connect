<tr id="<%= dom_id document %>">
  <% document = document.decorate %>
  <td class="table-cell">
    <div class="text-sm text-gray-900 font-medium">
      <a href="<%= ensure_protocol(document.link) %>" target="_blank"  class="line-clamp-2 font-medium text-gray-900 block hover:underline mt-2" target="_top">
        <%= document.decorate.display_filename %>
      </a>
    </div>
    <div  class=" text-sm text-gray-700 -mt-3" data-controller="show-more">
      <p style="white-space: pre-line; word-break: break-all;" data-target="show-more.truncate">
        <%=highlight_hashtag(auto_link_urls_in_text(document.comments.truncate(120).upcase_first)) %>
      </p>
      <p style="white-space: pre-line; word-break: break-all;" data-target="show-more.full" class="hidden">
        <%= highlight_hashtag(auto_link_urls_in_text(document.comments.upcase_first)) %>
      </p>
      <%if document.comments.strip.length > 120 %>
        <button type="button"  class=" btn-inline-edit text-blue-800 hover:text-blue-600 " data-action="click->show-more#toggle" data-target="show-more.button">
          Show more
        </button>
      <% end %>
    </div>
  </td>
  <td class="table-cell align-middle whitespace-nowrap">
    <% if document.contact.account.owner == document.user %>
      You 
    <% else %>
      <a href="<%= account_invitations_path %>" class="block hover:underline" target="_top">
        <%= document.user.decorate.display_name %>
      </a>
    <% end %>
  </td>
  <td class="table-cell whitespace-nowrap align-middle ">
    <%= display_created_at(document) %>
  </td>
  <td class="table-cell  align-middle">
    <% if policy([document.contact, document]).edit? %>
      <div class="flex justify-end items-center space-x-2">
        <%= edit_button(edit_contact_document_path(@contact, document)) %>
        <%= delete_button(contact_document_path(@contact, document)) %>
      </div>
    <% end %>
  </td>
</tr>
